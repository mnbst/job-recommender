# 2026-01-09

## 作業内容
- GCPネットワークセキュリティの懸念点・改善点を整理
- TODO.mdにネットワークセキュリティセクション追加（Cloud Armor、レート制限、Bot対策など）
- 「その他の希望」→「その他の希望またはアピールポイント」にUI・プロンプト変更
- TODO.mdの完了済みタスクにチェック（IAP削除、tfvars保護）

## 学び

### Cloud Armor / WAF / OWASP Top 10
- **WAF（Web Application Firewall）**: HTTPリクエストを検査し、悪意あるパターンをブロック
- **OWASP Top 10**: Webアプリの重大な脆弱性トップ10（2021年版）
  - A03: インジェクション（SQLi, XSS）→ WAFで防御可能
  - A07: 認証の不備（ブルートフォース）→ レート制限で緩和
- **Cloud Armor**: GCPのWAFサービス
  - `evaluatePreconfiguredExpr('sqli-v33-stable')` でSQLi防御
  - `rate_limit_options` でAPI乱用対策
  - Backend Serviceに `security_policy` を適用

### reCAPTCHA Enterprise + Cloud Armor
- **スコアベース判定**: 0.0（Bot）〜 1.0（人間）
- **Cloud Armor統合の利点**: アプリ改修不要でBot対策可能
  - フロント: トークン生成（JS SDK）
  - Cloud Armor: 自動検証・スコア判定
  - アプリ: 検証ロジック不要
- **料金**: 月10万評価まで無料、超過$1/1000
- **優先度**: まずCloud Armorのレート制限を導入し、Bot問題が顕在化したら追加検討
